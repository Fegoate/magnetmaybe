# 双站 RCS 插值 Java 实验报告

## 实验目的
依据根目录 AGENT.md 的任务要求，完成“任意频率、任意入射方向下的导弹/火箭弹双站 RCS 计算”演示。Java 程序需覆盖参数设置、地心到弹体坐标系转换，以及频率/方向插值下的计算结果可视化。

## AGENT 任务落实情况
- **任意频率插值**：界面输入起始/终止频率与点数，`RcsCalculator.sweep` 生成等间隔频率并调用合成模型得到 RCS，实现任意频率段的插值式扫频。【F:src/main/java/rcs/RcsApp.java†L65-L81】【F:src/main/java/rcs/RcsCalculator.java†L38-L59】
- **任意入射方向插值**：用户通过经纬高与姿态定义发射/接收方向；`geometry` 计算入射/散射方向角后，`directionGrid` 按方位/俯仰角网格评估 RCS，形成任意方向的插值可视化。【F:src/main/java/rcs/RcsCalculator.java†L16-L59】
- **地心坐标系与弹体坐标系转换**：`GeoPoint.toEcef` 将经纬高转为 ECEF，`Attitude` 构建航向-俯仰-横滚旋转矩阵并完成地心到弹体的矢量转换；`geometry` 在此基础上提取弹体坐标系下的入射/散射方位俯仰角。【F:src/main/java/rcs/GeoPoint.java†L3-L20】【F:src/main/java/rcs/Attitude.java†L3-L45】【F:src/main/java/rcs/RcsCalculator.java†L16-L36】
- **图形化界面与结果展示**：`RcsApp` 提供频率、姿态及经纬高输入；`RcsLineChartPanel` 绘制频率-RCS 折线，`DirectionHeatmapPanel` 绘制方向热力图并标记入射/散射方向，满足“参数设置和计算结果的图形化显示”。【F:src/main/java/rcs/RcsApp.java†L17-L155】【F:src/main/java/rcs/RcsLineChartPanel.java†L13-L114】【F:src/main/java/rcs/DirectionHeatmapPanel.java†L10-L145】

## 代码模块与作用说明
- **RcsApp（Swing 主界面）**：负责构建输入面板和绘图区域，解析用户参数后调用计算并刷新曲线/热力图；同时在界面上显示计算得到的入射与散射角度，便于验证方向转换结果。【F:src/main/java/rcs/RcsApp.java†L17-L155】
- **RcsCalculator（计算协调）**：
  - `geometry`：将发射机、接收机、目标经纬高转换为 ECEF，计算入射/散射方向并转换到弹体坐标系，输出角度用于插值与标记。【F:src/main/java/rcs/RcsCalculator.java†L16-L36】
  - `sweep`：按输入频率范围生成序列，调用模型获取每个频点的 RCS，形成扫频结果供折线图使用。【F:src/main/java/rcs/RcsCalculator.java†L38-L59】
  - `directionGrid`：在指定频点上生成方位/俯仰角网格 RCS，用于热力图展示方向敏感度。【F:src/main/java/rcs/RcsCalculator.java†L61-L64】
- **SyntheticRcsModel（合成 RCS 模型）**：模拟频率变化项、入射/散射角增益与交叉耦合，体现频率和方向对 RCS 的共同影响，并支持批量生成方向网格数据。【F:src/main/java/rcs/SyntheticRcsModel.java†L3-L33】
- **GeoPoint（地心坐标转换）**：基于 WGS84 椭球将经纬高转换为 ECEF 直角坐标，为几何计算提供统一的地心向量表示。【F:src/main/java/rcs/GeoPoint.java†L3-L20】
- **Attitude（姿态矩阵与转换）**：根据航向、俯仰、横滚角构造旋转矩阵，提供地心向量到弹体坐标的变换，支撑入射/散射方向在弹体系下的求解。【F:src/main/java/rcs/Attitude.java†L3-L45】
- **Vector3（向量运算工具）**：提供向量加减、缩放、点积、范数与归一化操作，服务于几何计算与坐标转换。【F:src/main/java/rcs/Vector3.java†L3-L24】
- **RcsLineChartPanel（频率-RCS 折线图）**：绘制 RCS 扫频结果，包含网格线、坐标轴刻度与数据点，直观展示频率插值效果。【F:src/main/java/rcs/RcsLineChartPanel.java†L13-L114】
- **DirectionHeatmapPanel（方向热力图）**：以方位/俯仰角为坐标渲染 RCS 分布，利用颜色映射与入射/散射标记凸显方向性差异，体现任意入射方向计算能力。【F:src/main/java/rcs/DirectionHeatmapPanel.java†L10-L145】

## 使用与验证
在 `java` 目录编译并运行：
```bash
javac -d out $(find src/main/java -name "*.java")
java -cp out rcs.RcsApp
```
输入频率范围、姿态角与发射/接收/目标经纬高，点击“计算并绘图”即可看到频率扫频曲线和方向热力图，并在界面左下方读取入射/散射角度，用以验证地心到弹体坐标转换及插值计算效果。
